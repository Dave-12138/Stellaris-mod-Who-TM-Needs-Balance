namespace = wtmnb
planet_event = {
	id = wtmnb.0
	pre_triggers = {
		has_owner = yes
	}
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		OR = {
			has_orbital_bombardment_stance = wtmnb_doom
			has_orbital_bombardment_stance = wtmnb_doom
		}
		FROM = {
			OR = {
				has_technology = tech_wtmnb_fortress
			}
		}
		NOT = {
			is_planet_class = pc_ai
		}
	}
	immediate = {
		owner = {
			save_event_target_as = doomed_planet_owner
		}
		#remove_all_buildings = yes
		random_owned_pop = {
			kill_pop = yes
		}
		every_planet_army = {
			remove_army = yes
		}
		if = {
			limit = {
				is_colony = no
			}
			event_target:doomed_planet_owner = {
				add_static_war_exhaustion = {
					attacker = from
					location = root
					value_for_planet_destruction = 1
				}
				#country_event = { id = wtmnb.1 } 
			}
			from = {
				country_event = {
					id = wtmnb.1
				}
			}
		}
		remove_modifier = "dangerous_wildlife"
	}
}

country_event = {
	id = wtmnb.1
	title = wtmnb.1.name
	#picture = GFX_evt_wsg_bombardment
	desc = wtmnb.1.desc
	show_sound = event_super_explosion
	location = from
	is_triggered_only = yes
	option = {
		name = EXCELLENT
		custom_tooltip = wtmnb.1.a
	}
}

country_event = {
	id = wtmnb.2
	is_triggered_only = yes
	trigger = {
		federation = {
			OR = {
				federation_cohesion < 80
				federation_level < 5
			}
		}
		any_owned_megastructure = {
			is_megastructure_type = wtmnb_love_mark
		}
	}
	hide_window = yes
	immediate = {
		federation = {
			add_cohesion = 200
			add_federation_experience = 66666
		}
	}
}

country_event = {
	is_triggered_only = yes
	id = wtmnb.3
	title = wtmnb.3.title
	desc = {
		text = graygoo.10.name
		trigger = {
			has_global_flag = gray_goo_crisis_set
		}
	}
	desc = {
		text = graygoo.120_title
		trigger = {
			has_global_flag = gray_goo_empire_set
		}
	}
	desc = {
		text = nanite_space_dragon_baby
		trigger = {
			has_global_flag = dragon_season
		}
	}
	desc = {
		text = graygoo.500.title
		trigger = {
			NOR = {
				has_global_flag = gray_goo_crisis_set
				has_global_flag = gray_goo_empire_set
				has_global_flag = dragon_season
			}
		}
	}
	option = {
		name = unremarkable
	}
	option = {
		name = federations2.61.A.neutral
	}
	option = {
		name = wtmnb.3.c
		trigger = {
			OR = {
				has_global_flag = gray_goo_crisis_set
				has_global_flag = gray_goo_empire_set
				has_global_flag = dragon_season
			}
			NOT = {
				exists = event_target:gray_owner
			}
		}
		country_event = {
			id = graygoo.401
		}
	}
}

country_event = {
	id = wtmnb.5
	is_triggered_only = yes
	title = wtmnb.5.name
	desc = wtmnb.5.desc
	option = {
		name = federations2.61.A.neutral
		hidden_effect = {
			clear_global_event_target = wtmnb_portal_start
		}
	}
}

#新领袖
country_event = {
	id = wtmnb.6
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		from = {
			species = {
				has_trait = trait_wtmnb_toy
			}
			OR = {
				gender = female
				gender = indeterminable
			}
		}
	}
	immediate = {
		from = {
			add_ruler_trait = leader_trait_wtmnb_toy
			add_trait = leader_trait_wtmnb_toy
		}
	}
}

#永远长不大，好耶
country_event = {
	id = wtmnb.7
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		any_owned_leader = {
			leader_age >= 15
			has_trait = leader_trait_wtmnb_toy
		}
	}
	immediate = {
		every_owned_leader = {
			limit = {
				has_trait = leader_trait_wtmnb_toy
			}
			set_age = 12
		}
		every_pool_leader = {
			limit = {
				has_trait = leader_trait_wtmnb_toy
			}
			set_age = 12
		}
	}
}

country_event = {
	id = wtmnb.8
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_country = {
			root = {
				remove_opinion_modifier = {
					who = prev
					modifier = opinion_wtmnb_1
				}
			}
		}
	}
}

planet_event = {
	id = wtmnb.1000
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		from = {
			save_event_target_as = wtmnb_planet_killer_ship
		}
		save_event_target_as = wtmnb_target
		from.owner = {
			country_event = {
				id = wtmnb.1001
			}
		}
	}
}

#巨像事件
country_event = {
	id = wtmnb.1001
	is_triggered_only = yes
	title = wtmnb.1001.name
	desc = wtmnb.1001.desc
	location = from
	#取消
	option = {
		name = wtmnb.1001.a
		custom_tooltip = wtmnb.1001.a.tip
	}
	#特质
	option = {
		trigger = {
			from = {
				is_capital = yes
			}
		}
		name = wtmnb.1001.b
		custom_tooltip = wtmnb.1001.b.tip
		hidden_effect = {
			event_target:wtmnb_target = {
				owner = {
					modify_species = {
						species = owner_species
						add_trait = trait_wtmnb_toy
						add_traits_at_start_of_list = yes
						change_scoped_species = yes
						effect = {
							save_event_target_as = new_wtm_species
							set_species_homeworld = event_target:wtmnb_target
						}
					}
					change_species = event_target:new_wtm_species
					set_built_species = event_target:new_wtm_species
					every_owned_leader = {
						limit = {
							OR = {
								gender = female
								gender = indeterminable
							}
						}
						add_ruler_trait = leader_trait_wtmnb_toy
						add_trait = leader_trait_wtmnb_toy
						#change_species = event_target:new_wtm_species
					}
					every_pool_leader = {
						limit = {
							OR = {
								gender = female
								gender = indeterminable
							}
						}
						add_ruler_trait = leader_trait_wtmnb_toy
						add_trait = leader_trait_wtmnb_toy
						#change_species = event_target:new_wtm_species
					}
				}
			}
		}
	}
	#特质
	option = {
		trigger = {
			from = {
				is_colony = yes
			}
		}
		name = wtmnb.1001.c
		custom_tooltip = wtmnb.1001.c.tip
		hidden_effect = {
			event_target:wtmnb_target = {
				every_owned_species = {
					limit = {
						NAND = {
							has_trait = trait_wtmnb_toy
							ideal_planet_class = event_target:wtmnb_target
						}
					}
					prev = {
						modify_species = {
							species = prev
							add_trait = trait_wtmnb_toy
							add_traits_at_start_of_list = yes
							change_scoped_species = yes
							ideal_planet_class = event_target:wtmnb_target
							set_species_homeworld = event_target:wtmnb_target
						}
					}
				}
			}
		}
	}
	option = {
		trigger = {
			from = {
				is_colony = yes
			}
		}
		name = wtmnb.1001.d
		hidden_effect = {
			country_event = {
				id = wtmnb_species.1
			}
		}
	}
	option = {
		trigger = {
			from = {
				is_colony = yes
			}
		}
		name = wtmnb.1001.e
		hidden_effect = {
			country_event = {
				id = wtmnb_species.100
			}
		}
	}
	#l星门
	option = {
		trigger = {
			from.solar_system = {
				any_system_megastructure = {
					is_megastructure_type = lgate_base
				}
			}
		}
		name = wtmnb.1001.f
		custom_tooltip = wtmnb.3.title
		hidden_effect = {
			country_event = {
				id = wtmnb.3
			}
		}
	}
	#安乐天使
	option = {
		trigger = {
			from = {
				is_star = no
				NOR = {
					is_planet_class = pc_shielded
					is_planet_class = pc_ringworld_shielded
					is_planet_class = pc_habitat_shielded
				}
			}
		}
		name = wtmnb.1001.g
		hidden_effect = {
			from = {
				planet_event = {
					id = crisis.5015
				}
				planet_event = {
					id = planet_destruction.200
				}
				planet_event = {
					id = planet_destruction.600
				}
			}
		}
	}
	#碎星
	option = {
		trigger = {
			from = {
				is_star = no
				NOR = {
					is_planet_class = pc_broken
					is_planet_class = pc_shattered
				}
			}
		}
		name = wtmnb.1001.h
		hidden_effect = {
			from = {
				planet_event = {
					id = crisis.5015
				}
				planet_event = {
					id = planet_destruction.100
				}
				planet_event = {
					id = planet_destruction.110
				}
				planet_event = {
					id = planet_destruction.600
				}
			}
		}
	}
	#黑洞
	option = {
		trigger = {
			from = {
				is_star = yes
				NOT = {
					is_planet_class = pc_black_hole
				}
			}
			event_target:wtmnb_planet_killer_ship = {
				any_owned_ship = {
					has_component = EDEN_STAR_AURA
				}
			}
		}
		name = wtmnb.1001.i
		from.solar_system = {
			every_system_planet = {
				limit = {
					is_star = no
				}
				planet_event = {
					id = crisis.5015
				}
			}
			eden_star_zeroth = yes
		}
	}
	#外交窗口
	option = {
		name = wtmnb.1001.j
		trigger = {
			from = {
				exists = owner
				owner = {
					NOT = {
						is_same_empire = root
					}
				}
			}
		}
		country_event = {
			id = wtmnb_diplomacy.1
		}
	}
	option = {
		name = wtmnb.1001.k
		trigger = {
			from = {
				NOT = {
					exists = owner
				}
				is_colonizable = yes
			}
		}
		from = {
			create_colony = {
				owner = prev
				species = prev
			}
		}
	}
}
