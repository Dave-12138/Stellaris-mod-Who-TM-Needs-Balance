terraform_link = {
	from = pc_molten
	to = pc_wtmnb_prometheus
	resources = {
		category = terraforming

		cost = {
			energy = 10000
		}
	}
	duration = 30
	condition = {
		custom_tooltip = {
			fail_text = terraform_needs_4th_key_and_eden_star
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
						has_component = WTMNB_9TH_KEY
					}
				}
			}
		}
	}
	potential = {
		OR = {
			has_technology = tech_wtmnb_fortress
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
						has_component = WTMNB_9TH_KEY
					}
				}
			}
		}
	}
	effect = {
		from = {
			reroll_deposits = yes
			if = {
				limit = {
					NOT = {
						has_deposit = deposit_wtmnb_prometheus
					}
				}
				add_deposit = deposit_wtmnb_prometheus
			}
		}
	}
	ai_weight = {
		weight = 1000
	}
}

terraform_link = {
	from = pc_nuked
	to = pc_wtmnb_prometheus
	resources = {
		category = terraforming

		cost = {
			energy = 10000
		}
	}
	duration = 30
	condition = {
		custom_tooltip = {
			fail_text = terraform_needs_4th_key_and_eden_star
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
						has_component = WTMNB_9TH_KEY
					}
				}
			}
		}
	}
	potential = {
		OR = {
			has_technology = tech_wtmnb_fortress
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
						has_component = WTMNB_9TH_KEY
					}
				}
			}
		}
	}
	effect = {
		from = {
			reroll_deposits = yes
			if = {
				limit = {
					NOT = {
						has_deposit = deposit_wtmnb_prometheus
					}
				}
				add_deposit = deposit_wtmnb_prometheus
			}
		}
	}
}

terraform_link = {
	from = pc_wtmnb_prometheus
	to = pc_city
	resources = {
		category = terraforming

		cost = {
			energy = 10000
		}
	}
	duration = 30
	condition = {
		custom_tooltip = {
			fail_text = terraform_needs_4th_key
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
	effect = {
		FROM = {
			clear_deposits = yes
		}
	}
	potential = {
		OR = {
			has_technology = tech_wtmnb_fortress
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
}

terraform_link = {
	from = pc_wtmnb_prometheus
	to = pc_gaia
	resources = {
		category = terraforming

		cost = {
			energy = 10000
		}
	}
	duration = 30
	condition = {
		custom_tooltip = {
			fail_text = terraform_needs_4th_key
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
	effect = {
		FROM = {
			reroll_deposits = yes
		}
	}
	potential = {
		OR = {
			has_technology = tech_wtmnb_fortress
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
}

terraform_link = {
	from = pc_city
	to = pc_wtmnb_prometheus
	resources = {
		category = terraforming

		cost = {
			energy = 10000
		}
	}
	duration = 30
	condition = {
		custom_tooltip = {
			fail_text = terraform_needs_4th_key_and_eden_star
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
						has_component = WTMNB_9TH_KEY
					}
				}
			}
		}
	}
	potential = {
		OR = {
			has_technology = tech_wtmnb_fortress
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
						has_component = WTMNB_9TH_KEY
					}
				}
			}
		}
	}
}

terraform_link = {
	from = pc_wtmnb_prometheus
	to = pc_prostitution_city
	resources = {
		category = terraforming

		cost = {
			energy = 10000
		}
	}
	duration = 30
	condition = {
		custom_tooltip = {
			fail_text = terraform_needs_4th_key
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
	potential = {
		OR = {
			has_technology = tech_wtmnb_fortress
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
		any_owned_pop = {
			OR = {
				has_trait = trait_DC_ethic_carnalism
				has_trait = trait_DC_ethic_asceticism
				has_trait = trait_DC_ethic_parasite_mind
				has_trait = trait_DC_ethic_lust_skynet
			}
		}
	}
}

terraform_link = {
	from = pc_wtmnb_prometheus
	to = pc_wsg_port
	resources = {
		category = terraforming

		cost = {
			energy = 10000
		}
	}
	duration = 30
	condition = {
		custom_tooltip = {
			fail_text = terraform_needs_4th_key
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
	potential = {
		OR = {
			has_technology = tech_wtmnb_fortress
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
		has_authority = auth_warshipgirls
	}
}

terraform_link = {
	from = pc_wsg_port
	to = pc_swim
	resources = {
		category = terraforming

		cost = {
			energy = 10000
		}
	}
	duration = 30
	condition = {
		custom_tooltip = {
			fail_text = terraform_needs_4th_key
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
	potential = {
		OR = {
			has_technology = tech_wtmnb_fortress
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
		has_authority = auth_warshipgirls
	}
}

terraform_link = {
	from = pc_shenhai
	to = pc_swim
	resources = {
		category = terraforming

		cost = {
			energy = 10000
		}
	}
	duration = 30
	condition = {
		custom_tooltip = {
			fail_text = terraform_needs_4th_key
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
	potential = {
		OR = {
			has_technology = tech_wtmnb_fortress
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
		has_authority = auth_shenhai
	}
}

terraform_link = {
	from = pc_wtmnb_prometheus
	to = pc_shenhai
	resources = {
		category = terraforming

		cost = {
			energy = 10000
		}
	}
	duration = 30
	condition = {
		custom_tooltip = {
			fail_text = terraform_needs_4th_key
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
	potential = {
		OR = {
			has_technology = tech_wtmnb_fortress
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
		has_authority = auth_shenhai
	}
}

terraform_link = {
	from = pc_ringworld_habitable
	to = pc_ringworld_habitable_wsg
	resources = {
		category = terraforming

		cost = {
			energy = 10000
		}
	}
	duration = 30
	condition = {
		custom_tooltip = {
			fail_text = terraform_needs_4th_key
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
	potential = {
		OR = {
			has_technology = tech_wtmnb_fortress
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
		has_authority = auth_warshipgirls
	}
}

terraform_link = {
	from = pc_ringworld_seam
	to = pc_ringworld_habitable
	resources = {
		category = terraforming

		cost = {
			energy = 10000
		}
	}
	duration = 30
	condition = {
		custom_tooltip = {
			fail_text = terraform_needs_4th_key
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
	potential = {
		OR = {
			has_technology = tech_wtmnb_fortress
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
}

terraform_link = {
	from = pc_ringworld_seam_damaged
	to = pc_ringworld_habitable
	resources = {
		category = terraforming

		cost = {
			energy = 10000
		}
	}
	duration = 30
	condition = {
		custom_tooltip = {
			fail_text = terraform_needs_4th_key
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
	potential = {
		OR = {
			has_technology = tech_wtmnb_fortress
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
}

terraform_link = {
	from = pc_ringworld_tech
	to = pc_ringworld_habitable
	resources = {
		category = terraforming

		cost = {
			energy = 10000
		}
	}
	duration = 30
	condition = {
		custom_tooltip = {
			fail_text = terraform_needs_4th_key
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
	potential = {
		OR = {
			has_technology = tech_wtmnb_fortress
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
}

terraform_link = {
	from = pc_ringworld_tech_damaged
	to = pc_ringworld_habitable
	resources = {
		category = terraforming

		cost = {
			energy = 10000
		}
	}
	duration = 30
	condition = {
		custom_tooltip = {
			fail_text = terraform_needs_4th_key
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
	potential = {
		OR = {
			has_technology = tech_wtmnb_fortress
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
}

terraform_link = {
	from = pc_ringworld_habitable
	to = pc_ringworld_habitable_sh
	resources = {
		category = terraforming

		cost = {
			energy = 10000
		}
	}
	duration = 30
	condition = {
		custom_tooltip = {
			fail_text = terraform_needs_4th_key
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
	}
	potential = {
		OR = {
			has_technology = tech_wtmnb_fortress
			from = {
				any_fleet_in_orbit = {
					any_owned_ship = {
						has_component = WTMNB_4TH_KEY
					}
				}
			}
		}
		has_authority = auth_shenhai
	}
}
